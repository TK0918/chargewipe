# æ‹’ä»˜é¢„è­¦ç³»ç»Ÿ - å®Œæ•´PRDæ–‡æ¡£

## ğŸ“‘ æ–‡æ¡£å¯¼èˆª

æœ¬PRDç”±ä»¥ä¸‹æ–‡æ¡£ç»„æˆï¼š

1. âœ… **æ‹’ä»˜é¢„è­¦ç³»ç»ŸPRDä¸»æ–‡æ¡£.md** - é¡¹ç›®æ¦‚è¿°ã€èƒŒæ™¯ã€ç›®æ ‡
2. âœ… **ä¸šåŠ¡æµç¨‹è®¾è®¡.md** - è¯¦ç»†ä¸šåŠ¡æµç¨‹å›¾å’Œè§„åˆ™è¯´æ˜
3. ğŸ“„ **è¿è¥ç«¯åŠŸèƒ½è®¾è®¡è¯¦ç»†è¯´æ˜** - è§æœ¬æ–‡æ¡£ç¬¬7.1èŠ‚
4. ğŸ“„ **å®¢æˆ·ç«¯åŠŸèƒ½è®¾è®¡è¯¦ç»†è¯´æ˜** - è§æœ¬æ–‡æ¡£ç¬¬7.2èŠ‚
5. ğŸ“„ **æ•°æ®åº“è®¾è®¡** - è§æœ¬æ–‡æ¡£ç¬¬8èŠ‚
6. ğŸ“„ **APIæ¥å£æ–‡æ¡£** - è§æœ¬æ–‡æ¡£ç¬¬9èŠ‚

---

## ç›®å½•

- [1. é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [2. æ ¸å¿ƒä¸šåŠ¡æµç¨‹](#2-æ ¸å¿ƒä¸šåŠ¡æµç¨‹)
- [3. ç³»ç»Ÿæ¶æ„](#3-ç³»ç»Ÿæ¶æ„)
- [4. åŠŸèƒ½æ¨¡å—æ€»è§ˆ](#4-åŠŸèƒ½æ¨¡å—æ€»è§ˆ)
- [5. è¿è¥ç«¯åŠŸèƒ½è¯¦ç»†è®¾è®¡](#5-è¿è¥ç«¯åŠŸèƒ½è¯¦ç»†è®¾è®¡)
- [6. å®¢æˆ·ç«¯åŠŸèƒ½è¯¦ç»†è®¾è®¡](#6-å®¢æˆ·ç«¯åŠŸèƒ½è¯¦ç»†è®¾è®¡)
- [7. æ ¸å¿ƒæ•°æ®è¡¨ç»“æ„](#7-æ ¸å¿ƒæ•°æ®è¡¨ç»“æ„)
- [8. å…³é”®APIæ¥å£](#8-å…³é”®apiæ¥å£)
- [9. éåŠŸèƒ½æ€§éœ€æ±‚](#9-éåŠŸèƒ½æ€§éœ€æ±‚)
- [10. å®æ–½è®¡åˆ’](#10-å®æ–½è®¡åˆ’)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 äº§å“å®šä½
æ‹’ä»˜é¢„è­¦ç³»ç»Ÿæ˜¯ä¸€ä¸ªBç«¯SaaSå¹³å°ï¼Œé€šè¿‡å¯¹æ¥å¤šä¸ªæœåŠ¡å•†æä¾›æ‹’ä»˜é¢„è­¦æœåŠ¡ï¼Œå¸®åŠ©è·¨å¢ƒç”µå•†å–å®¶åŠæ—¶å¤„ç†æ‹’ä»˜ï¼Œé™ä½æŸå¤±ã€‚

### 1.2 å•†ä¸šæ¨¡å¼
```
æœåŠ¡å•†æˆæœ¬ä»· â†’ æˆ‘ä»¬çš„ç³»ç»Ÿ â†’ å®¢æˆ·å”®ä»·
         â†“
      èµšå–å·®ä»·
```

### 1.3 æ ¸å¿ƒä»·å€¼
- **For å®¢æˆ·**: åŠæ—¶æ”¶åˆ°æ‹’ä»˜é¢„è­¦ï¼Œå¿«é€Ÿå¤„ç†ï¼Œé™ä½æ‹’ä»˜æŸå¤±
- **For æˆ‘ä»¬**: æ•´åˆå¤šä¸ªæœåŠ¡å•†ï¼Œæä¾›ç»Ÿä¸€æœåŠ¡ï¼Œèµšå–å·®ä»·
- **For æœåŠ¡å•†**: æ‰©å¤§å¸‚åœºè¦†ç›–ï¼Œå¢åŠ å®¢æˆ·é‡

---

## 2. æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### 2.1 æ•´ä½“ä¸šåŠ¡æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœåŠ¡å•†API  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ æ¨é€/è½®è¯¢é¢„è­¦
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ‹’ä»˜é¢„è­¦ç³»ç»Ÿ      â”‚
â”‚  - é¢„è­¦æ¥æ”¶ä¸å»é‡   â”‚
â”‚  - DescriptoråŒ¹é…   â”‚
â”‚  - å®¢æˆ·åˆ†é…         â”‚
â”‚  - è‡ªåŠ¨æ‰£è´¹         â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚       â”‚
      â†“       â†“
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ è¿è¥ç«¯  â”‚ â”‚å®¢æˆ·ç«¯  â”‚
 â”‚ (ä¸­æ–‡) â”‚ â”‚(è‹±æ–‡) â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å…³é”®ä¸šåŠ¡è§„åˆ™

| è§„åˆ™é¡¹ | è¯´æ˜ |
|--------|------|
| é¢„è­¦å»é‡ | æ ¹æ®alert_idå»é‡ï¼Œç¡®ä¿åŒä¸€é¢„è­¦åªå¤„ç†ä¸€æ¬¡ |
| æ‰£è´¹æ—¶æœº | é¢„è­¦åˆ†é…ç»™å®¢æˆ·æ—¶ç«‹å³æ‰£è´¹ï¼ˆä½™é¢å……è¶³æ—¶ï¼‰ |
| ä½™é¢ä¸è¶³ | æ ‡è®°æœªæ‰£è´¹ï¼Œå®¢æˆ·å……å€¼åè‡ªåŠ¨è¡¥æ‰£ |
| ETHOCAå¤„ç† | å®¢æˆ·éœ€æäº¤é€€æ¬¾ä¿¡æ¯ï¼Œåªèƒ½åé¦ˆä¸€æ¬¡ |
| RDRå¤„ç† | è‡ªåŠ¨é€€æ¬¾ï¼Œå®¢æˆ·æ— éœ€æ“ä½œ |
| æˆæƒå®¡æ ¸ | æœåŠ¡å•†å®¡æ ¸éœ€3-4å¤© |

---

## 3. ç³»ç»Ÿæ¶æ„

### 3.1 æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å‰ç«¯å±‚                      â”‚
â”‚  è¿è¥ç«¯(Vue)  â”‚  å®¢æˆ·ç«¯(React)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          åº”ç”¨å±‚                      â”‚
â”‚  API Gateway â”‚ ä¸šåŠ¡æœåŠ¡ â”‚ å®šæ—¶ä»»åŠ¡ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          æ•°æ®å±‚                      â”‚
â”‚  MySQL â”‚ Redis â”‚ OSS â”‚ æ¶ˆæ¯é˜Ÿåˆ—    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ ¸å¿ƒæ¨¡å—

1. **é¢„è­¦æ¥æ”¶æ¨¡å—**: Webhookæ¥æ”¶ + å®šæ—¶è½®è¯¢
2. **é¢„è­¦åˆ†é…æ¨¡å—**: DescriptoråŒ¹é… + è‡ªåŠ¨æ‰£è´¹
3. **é€šçŸ¥æ¨¡å—**: é‚®ä»¶é€šçŸ¥ + é£ä¹¦é€šçŸ¥
4. **è´¢åŠ¡æ¨¡å—**: å……å€¼ç®¡ç† + äº¤æ˜“è®°å½•
5. **æˆæƒç®¡ç†æ¨¡å—**: å®¢æˆ·æˆæƒ + æœåŠ¡å•†å®¡æ ¸
6. **æŠ¥è¡¨æ¨¡å—**: æ•°æ®ç»Ÿè®¡ + å¯è§†åŒ–å±•ç¤º

---

## 4. åŠŸèƒ½æ¨¡å—æ€»è§ˆ

### 4.1 è¿è¥ç«¯åŠŸèƒ½(ä¸­æ–‡)

| æ¨¡å— | ä¸»è¦åŠŸèƒ½ | å…³é”®é¡µé¢ |
|------|----------|----------|
| ä¸šåŠ¡æ•°æ® | æˆæœ¬ã€æ”¶å…¥ã€åˆ©æ¶¦ç»Ÿè®¡ | æ•°æ®çœ‹æ¿ |
| å®¢æˆ·ç®¡ç† | å®¢æˆ·CRUDã€ä»·æ ¼è®¾ç½®ã€ä½™é¢ç®¡ç† | å®¢æˆ·åˆ—è¡¨ã€å®¢æˆ·è¯¦æƒ… |
| æœåŠ¡å•†ç®¡ç† | æœåŠ¡å•†CRUDã€APIé…ç½®ã€ä»·æ ¼è®¾ç½® | æœåŠ¡å•†åˆ—è¡¨ã€APIé…ç½® |
| é¢„è­¦æ˜ç»† | é¢„è­¦æŸ¥è¯¢ã€æ‰‹åŠ¨åˆ†é…ã€çŠ¶æ€ç®¡ç† | é¢„è­¦åˆ—è¡¨ã€é¢„è­¦è¯¦æƒ… |

### 4.2 å®¢æˆ·ç«¯åŠŸèƒ½(è‹±æ–‡)

| æ¨¡å— | ä¸»è¦åŠŸèƒ½ | å…³é”®é¡µé¢ |
|------|----------|----------|
| æˆæƒç®¡ç† | æˆæƒCRUDã€çŠ¶æ€æŸ¥çœ‹ | Authorization List |
| é¢„è­¦ç®¡ç† | é¢„è­¦æŸ¥çœ‹ã€ETHOCAåé¦ˆ | Alert List, Alert Details |
| é’±åŒ…ç®¡ç† | å……å€¼ã€äº¤æ˜“æ˜ç»† | Wallet, Transactions |

---

## 5. è¿è¥ç«¯åŠŸèƒ½è¯¦ç»†è®¾è®¡

### 5.1 ä¸šåŠ¡æ•°æ®çœ‹æ¿

#### 5.1.1 æ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡

| æŒ‡æ ‡ | è®¡ç®—å…¬å¼ | å¯¹æ¯” |
|------|----------|------|
| æ€»é¢„è­¦æ•° | COUNT(alerts) | ç¯æ¯”ä¸ŠæœŸ |
| æ€»æˆæœ¬ | SUM(provider_cost) | ç¯æ¯”ä¸ŠæœŸ |
| æ€»æ”¶å…¥ | SUM(customer_price) | ç¯æ¯”ä¸ŠæœŸ |
| æ¯›åˆ©æ¶¦ | æ€»æ”¶å…¥ - æ€»æˆæœ¬ | ç¯æ¯”ä¸ŠæœŸ |
| æ¯›åˆ©ç‡ | (æ€»æ”¶å…¥-æ€»æˆæœ¬)/æ€»æ”¶å…¥Ã—100% | ç¯æ¯”ä¸ŠæœŸ |

#### 5.1.2 æŠ¥è¡¨ç»´åº¦

**æŒ‰æ—¶é—´ç»´åº¦:**
- æ¯æ—¥è¶‹åŠ¿å›¾ï¼ˆæŠ˜çº¿å›¾ï¼‰
- æ¯æœˆæ±‡æ€»è¡¨ï¼ˆè¡¨æ ¼ï¼‰

**æŒ‰æœåŠ¡å•†ç»´åº¦:**
- æœåŠ¡å•†ç»Ÿè®¡è¡¨
- åŒ…å«ï¼šé¢„è­¦æ•°ã€æˆæœ¬ã€æ”¶å…¥ã€æ¯›åˆ©

**æŒ‰å®¢æˆ·ç»´åº¦:**
- å®¢æˆ·ç»Ÿè®¡è¡¨
- åŒ…å«ï¼šé¢„è­¦æ•°ã€æ¶ˆè´¹ã€æˆæœ¬ã€æ¯›åˆ©ã€å½“å‰ä½™é¢

### 5.2 å®¢æˆ·ç®¡ç†

#### 5.2.1 å®¢æˆ·åˆ—è¡¨å­—æ®µ

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| å®¢æˆ·ID | String | ç³»ç»Ÿç”Ÿæˆ |
| å®¢æˆ·åç§° | String | å…¬å¸åç§° |
| è”ç³»é‚®ç®± | Email | ç™»å½•é‚®ç®± |
| è´¦å·çŠ¶æ€ | Tag | æ­£å¸¸/å·²åœç”¨ |
| å½“å‰ä½™é¢ | Currency | é’±åŒ…ä½™é¢ |
| æˆæƒæ•°é‡ | Number | å·²æˆæƒåº—é“ºæ•° |
| åˆ›å»ºæ—¶é—´ | DateTime | åˆ›å»ºæ—¶é—´ |

#### 5.2.2 å®¢æˆ·å®šä»·è®¾ç½®

**å›ºå®šä»·æ ¼:**
```
ETHOCAå•ä»·: $10.00
RDRå•ä»·: $8.00
```

**é˜¶æ¢¯ä»·æ ¼:**
```
é˜¶æ¢¯1: 0-100æ¡
  - ETHOCA: $10.00
  - RDR: $8.00
  
é˜¶æ¢¯2: 101-500æ¡
  - ETHOCA: $9.00
  - RDR: $7.00
  
é˜¶æ¢¯3: 501+æ¡
  - ETHOCA: $8.00
  - RDR: $6.00
```

### 5.3 æœåŠ¡å•†ç®¡ç†

#### 5.3.1 æœåŠ¡å•†åŸºæœ¬ä¿¡æ¯

| å­—æ®µå | è¯´æ˜ |
|--------|------|
| æœåŠ¡å•†åç§° | å…¬å¸åç§° |
| æ”¯æŒæ¨¡å¼ | ETHOCA/RDR/ä¸¤è€… |
| æ•°æ®è·å–æ–¹å¼ | æ¨é€/è½®è¯¢ |
| è½®è¯¢é—´éš” | é»˜è®¤60åˆ†é’Ÿ |

#### 5.3.2 APIé…ç½®

**æ¨é€æ¨¡å¼:**
- Webhook URLï¼ˆç³»ç»Ÿæä¾›ï¼‰
- éªŒè¯Tokenï¼ˆç³»ç»Ÿæä¾›ï¼‰

**è½®è¯¢æ¨¡å¼:**
- API Endpointï¼ˆæœåŠ¡å•†æä¾›ï¼‰
- API Keyï¼ˆæœåŠ¡å•†æä¾›ï¼‰
- API Secretï¼ˆæœåŠ¡å•†æä¾›ï¼Œå¯é€‰ï¼‰

**é€šç”¨æ¥å£:**
- æˆæƒæ¥å£URL
- åé¦ˆæ¥å£URLï¼ˆä»…ETHOCAï¼‰

### 5.4 é¢„è­¦æ˜ç»†

#### 5.4.1 åˆ—è¡¨å­—æ®µ

| å­—æ®µå | è¯´æ˜ |
|--------|------|
| é¢„è­¦ID | æœåŠ¡å•†æä¾›çš„å”¯ä¸€ID |
| é¢„è­¦ç±»å‹ | ETHOCA/RDR |
| Descriptor | åº—é“ºæ ‡è¯†ç¬¦ |
| å®¢æˆ·åç§° | æ‰€å±å®¢æˆ· |
| æœåŠ¡å•† | é¢„è­¦æ¥æº |
| äº¤æ˜“é‡‘é¢ | åŸå§‹äº¤æ˜“é‡‘é¢ |
| å¤„ç†çŠ¶æ€ | å¾…åé¦ˆ/å·²åé¦ˆ/æ— éœ€å¤„ç† |
| æ‰£è´¹çŠ¶æ€ | å·²æ‰£è´¹/æœªæ‰£è´¹ |
| æ¥æ”¶æ—¶é—´ | ç³»ç»Ÿæ¥æ”¶æ—¶é—´ |

#### 5.4.2 æ“ä½œåŠŸèƒ½

- **æŸ¥çœ‹è¯¦æƒ…**: æŸ¥çœ‹å®Œæ•´é¢„è­¦ä¿¡æ¯
- **åˆ†é…å®¢æˆ·**: æ‰‹åŠ¨åˆ†é…æœªåŒ¹é…çš„é¢„è­¦
- **æ ‡è®°å·²æ‰£è´¹**: äººå·¥æ ‡è®°æ‰£è´¹çŠ¶æ€
- **æ‰¹é‡å¯¼å‡º**: å¯¼å‡ºExcel

---

## 6. å®¢æˆ·ç«¯åŠŸèƒ½è¯¦ç»†è®¾è®¡

### 6.1 æˆæƒç®¡ç† (Authorization Management)

#### 6.1.1 æ–°å¢æˆæƒè¡¨å•

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| Descriptor | Input | Yes | Store identifier (e.g. MYSHOP*STORE) |
| Authorization Mode | Checkbox | Yes | ETHOCA / RDR (can select both) |
| BIN | Input(6) | Conditional | Required if RDR selected |
| CAID | Input | Conditional | Required if RDR selected |
| Notification Email | Email | Yes | Email for alerts |
| Provider | Select | Yes | Choose service provider |

#### 6.1.2 æˆæƒçŠ¶æ€

| Status | Color | Description |
|--------|-------|-------------|
| Processing | Yellow | Waiting for provider approval (3-4 days) |
| Active | Green | Approved, receiving alerts |
| Failed | Red | Rejected by provider |
| Disabled | Gray | Manually disabled |

### 6.2 é¢„è­¦ç®¡ç† (Alert Management)

#### 6.2.1 é¢„è­¦åˆ—è¡¨å­—æ®µ

| Column | Description |
|--------|-------------|
| Alert ID | Unique alert ID |
| Alert Type | ETHOCA / RDR |
| Descriptor | Store identifier |
| Transaction Amount | Original transaction amount |
| Transaction Time | When transaction occurred |
| Card Last 4 | Last 4 digits of card |
| Status | Pending Feedback / Completed / No Action Needed |
| Received Time | When alert was received |

#### 6.2.2 ETHOCAåé¦ˆè¡¨å•

| Field | Type | Required | Validation |
|-------|------|----------|------------|
| Refund ID | Input | Yes | Cannot be empty |
| Refund Amount | Number | Yes | Must be > 0 |
| Refund Time | DateTime | Yes | Cannot be future time |

### 6.3 é’±åŒ…ç®¡ç† (Wallet Management)

#### 6.3.1 Tabé¡µç­¾

1. **Transaction Details** - äº¤æ˜“æ˜ç»†
2. **Online Recharge** - åœ¨çº¿å……å€¼
3. **Offline Transfer** - çº¿ä¸‹è½¬è´¦

#### 6.3.2 äº¤æ˜“æ˜ç»†å­—æ®µ

| Column | Description |
|--------|-------------|
| Transaction Time | When transaction occurred |
| Transaction Type | Online Recharge / Offline Transfer / Alert Consumption / Recharge |
| Amount | Positive for income, negative for expense |
| Balance | Balance after transaction |
| Related Alert ID | Link to alert (if applicable) |
| Remark | Transaction notes |

---

## 7. æ ¸å¿ƒæ•°æ®è¡¨ç»“æ„

### 7.1 customers (å®¢æˆ·è¡¨)

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç´¢å¼• | è¯´æ˜ |
|--------|------|------|------|------|
| customer_id | VARCHAR(50) | æ˜¯ | PK | å®¢æˆ·ID |
| customer_name | VARCHAR(100) | æ˜¯ | æ˜¯ | å®¢æˆ·åç§° |
| email | VARCHAR(100) | æ˜¯ | UK | ç™»å½•é‚®ç®± |
| password | VARCHAR(255) | æ˜¯ | - | å¯†ç (åŠ å¯†) |
| balance | DECIMAL(10,2) | æ˜¯ | - | é’±åŒ…ä½™é¢ |
| balance_threshold | DECIMAL(10,2) | æ˜¯ | - | ä½™é¢é¢„è­¦é˜ˆå€¼ |
| status | ENUM | æ˜¯ | æ˜¯ | active/disabled |
| created_at | DATETIME | æ˜¯ | æ˜¯ | åˆ›å»ºæ—¶é—´ |

### 7.2 providers (æœåŠ¡å•†è¡¨)

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| provider_id | VARCHAR(50) | æ˜¯ | æœåŠ¡å•†ID |
| provider_name | VARCHAR(100) | æ˜¯ | æœåŠ¡å•†åç§° |
| supported_modes | JSON | æ˜¯ | ["ETHOCA","RDR"] |
| fetch_mode | ENUM | æ˜¯ | push/poll |
| poll_interval | INT | å¦ | è½®è¯¢é—´éš”(åˆ†é’Ÿ) |
| status | ENUM | æ˜¯ | active/disabled |

### 7.3 authorizations (æˆæƒè¡¨)

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| authorization_id | VARCHAR(50) | æ˜¯ | æˆæƒID |
| customer_id | VARCHAR(50) | æ˜¯ | å®¢æˆ·ID |
| provider_id | VARCHAR(50) | æ˜¯ | æœåŠ¡å•†ID |
| descriptor | VARCHAR(100) | æ˜¯ | åº—é“ºæ ‡è¯†ç¬¦ |
| modes | JSON | æ˜¯ | ["ETHOCA","RDR"] |
| bin | VARCHAR(6) | å¦ | BINç  |
| caid | VARCHAR(50) | å¦ | CAID |
| notification_email | VARCHAR(100) | æ˜¯ | é€šçŸ¥é‚®ç®± |
| status | ENUM | æ˜¯ | processing/active/failed/disabled |

**å”¯ä¸€ç´¢å¼•:** (descriptor, provider_id, deleted_at)

### 7.4 alerts (é¢„è­¦è¡¨)

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| alert_id | VARCHAR(50) | æ˜¯ | é¢„è­¦ID(æœåŠ¡å•†æä¾›) |
| provider_id | VARCHAR(50) | æ˜¯ | æœåŠ¡å•†ID |
| customer_id | VARCHAR(50) | å¦ | å®¢æˆ·ID |
| authorization_id | VARCHAR(50) | å¦ | æˆæƒID |
| alert_type | ENUM | æ˜¯ | ETHOCA/RDR |
| descriptor | VARCHAR(100) | æ˜¯ | åº—é“ºæ ‡è¯†ç¬¦ |
| transaction_amount | DECIMAL(10,2) | æ˜¯ | äº¤æ˜“é‡‘é¢ |
| transaction_time | DATETIME | æ˜¯ | äº¤æ˜“æ—¶é—´ |
| process_status | ENUM | æ˜¯ | pending/completed/none |
| charge_status | ENUM | æ˜¯ | charged/uncharged |
| charge_amount | DECIMAL(10,2) | å¦ | æ‰£è´¹é‡‘é¢ |
| customer_price | DECIMAL(10,2) | å¦ | å®¢æˆ·ä»·æ ¼ |
| provider_cost | DECIMAL(10,2) | å¦ | æœåŠ¡å•†æˆæœ¬ |
| profit | DECIMAL(10,2) | å¦ | æ¯›åˆ© |

### 7.5 transactions (äº¤æ˜“æ˜ç»†è¡¨)

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| transaction_id | VARCHAR(50) | äº¤æ˜“ID |
| customer_id | VARCHAR(50) | å®¢æˆ·ID |
| transaction_type | ENUM | online_recharge/offline_transfer/alert_consumption/recharge |
| amount | DECIMAL(10,2) | å˜åŠ¨é‡‘é¢ |
| balance_before | DECIMAL(10,2) | äº¤æ˜“å‰ä½™é¢ |
| balance_after | DECIMAL(10,2) | äº¤æ˜“åä½™é¢ |
| alert_id | VARCHAR(50) | å…³è”é¢„è­¦ID |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

---

## 8. å…³é”®APIæ¥å£

### 8.1 é€šç”¨è§„èŒƒ

**Base URL:**
- è¿è¥ç«¯: `https://api.example.com/api/admin`
- å®¢æˆ·ç«¯: `https://api.example.com/api/client`

**è®¤è¯æ–¹å¼:** JWT Token

**å“åº”æ ¼å¼:**
```json
{
  "code": 0,
  "message": "success",
  "data": { ... }
}
```

### 8.2 æ ¸å¿ƒæ¥å£åˆ—è¡¨

#### 8.2.1 é¢„è­¦ç›¸å…³

| æ¥å£ | Method | Path | è¯´æ˜ |
|------|--------|------|------|
| è·å–é¢„è­¦åˆ—è¡¨ | GET | /api/admin/alerts | è¿è¥ç«¯æŸ¥è¯¢é¢„è­¦ |
| è·å–é¢„è­¦è¯¦æƒ… | GET | /api/admin/alerts/{id} | æŸ¥çœ‹é¢„è­¦è¯¦æƒ… |
| åˆ†é…å®¢æˆ· | POST | /api/admin/alerts/{id}/assign | æ‰‹åŠ¨åˆ†é…é¢„è­¦ |
| æäº¤åé¦ˆ | POST | /api/client/alerts/{id}/feedback | å®¢æˆ·æäº¤ETHOCAåé¦ˆ |

#### 8.2.2 å®¢æˆ·ç›¸å…³

| æ¥å£ | Method | Path | è¯´æ˜ |
|------|--------|------|------|
| è·å–å®¢æˆ·åˆ—è¡¨ | GET | /api/admin/customers | æŸ¥è¯¢å®¢æˆ·åˆ—è¡¨ |
| æ–°å¢å®¢æˆ· | POST | /api/admin/customers | åˆ›å»ºæ–°å®¢æˆ· |
| è®¾ç½®ä»·æ ¼ | POST | /api/admin/customers/{id}/pricing | è®¾ç½®å®¢æˆ·å®šä»· |
| é‡ç½®å¯†ç  | POST | /api/admin/customers/{id}/reset-password | é‡ç½®å®¢æˆ·å¯†ç  |

#### 8.2.3 æˆæƒç›¸å…³

| æ¥å£ | Method | Path | è¯´æ˜ |
|------|--------|------|------|
| è·å–æˆæƒåˆ—è¡¨ | GET | /api/client/authorizations | å®¢æˆ·æŸ¥è¯¢æˆæƒ |
| æ–°å¢æˆæƒ | POST | /api/client/authorizations | å®¢æˆ·åˆ›å»ºæˆæƒ |
| åœç”¨æˆæƒ | POST | /api/client/authorizations/{id}/disable | åœç”¨æˆæƒ |
| æ¢å¤æˆæƒ | POST | /api/client/authorizations/{id}/enable | æ¢å¤æˆæƒ |

#### 8.2.4 é’±åŒ…ç›¸å…³

| æ¥å£ | Method | Path | è¯´æ˜ |
|------|--------|------|------|
| è·å–äº¤æ˜“æ˜ç»† | GET | /api/client/wallet/transactions | æŸ¥è¯¢äº¤æ˜“è®°å½• |
| åˆ›å»ºå……å€¼è®¢å• | POST | /api/client/wallet/recharge/create | å‘èµ·åœ¨çº¿å……å€¼ |
| æäº¤è½¬è´¦ | POST | /api/client/wallet/transfer/submit | æäº¤çº¿ä¸‹è½¬è´¦ |

#### 8.2.5 Webhookæ¥å£

| æ¥å£ | Method | Path | è¯´æ˜ |
|------|--------|------|------|
| æ¥æ”¶é¢„è­¦ | POST | /api/webhook/providers/{id}/alerts | æœåŠ¡å•†æ¨é€é¢„è­¦ |
| æˆæƒå›è°ƒ | POST | /api/webhook/providers/{id}/authorization-status | æˆæƒå®¡æ ¸ç»“æœ |

---

## 9. éåŠŸèƒ½æ€§éœ€æ±‚

### 9.1 æ€§èƒ½è¦æ±‚

| æŒ‡æ ‡ | è¦æ±‚ |
|------|------|
| APIå“åº”æ—¶é—´ | P95 < 1s |
| é¡µé¢åŠ è½½æ—¶é—´ | é¦–å± < 2s |
| å¹¶å‘ç”¨æˆ·æ•° | æ”¯æŒ1000+ |
| é¢„è­¦åˆ†é…å»¶è¿Ÿ | < 5ç§’ |
| é‚®ä»¶å‘é€å»¶è¿Ÿ | < 1åˆ†é’Ÿ |

### 9.2 å®‰å…¨è¦æ±‚

- âœ… å¯†ç bcryptåŠ å¯†
- âœ… APIå¯†é’¥AES-256åŠ å¯†
- âœ… HTTPSä¼ è¾“
- âœ… JWT Tokenè®¤è¯
- âœ… æ¥å£é™æµï¼š100æ¬¡/åˆ†é’Ÿ/IP
- âœ… ç™»å½•å¤±è´¥5æ¬¡é”å®š15åˆ†é’Ÿ
- âœ… æ•°æ®åº“å®šæœŸå¤‡ä»½

### 9.3 å¯ç”¨æ€§è¦æ±‚

| æŒ‡æ ‡ | è¦æ±‚ |
|------|------|
| ç³»ç»Ÿå¯ç”¨æ€§ | 99.9% |
| æ•…éšœæ¢å¤æ—¶é—´ | < 1å°æ—¶ |
| æ•°æ®æ¢å¤ç‚¹ | < 1å°æ—¶ |

### 9.4 å…¼å®¹æ€§

**æµè§ˆå™¨æ”¯æŒ:**
- Chrome (æœ€æ–°ç‰ˆåŠå‰ä¸€ç‰ˆæœ¬)
- Firefox (æœ€æ–°ç‰ˆåŠå‰ä¸€ç‰ˆæœ¬)  
- Safari (æœ€æ–°ç‰ˆåŠå‰ä¸€ç‰ˆæœ¬)
- Edge (æœ€æ–°ç‰ˆåŠå‰ä¸€ç‰ˆæœ¬)

**è®¾å¤‡æ”¯æŒ:**
- PCç«¯: â‰¥1366x768
- ç§»åŠ¨ç«¯: å“åº”å¼è®¾è®¡

---

## 10. å®æ–½è®¡åˆ’

### 10.1 å¼€å‘é˜¶æ®µ

**Phase 1: åŸºç¡€åŠŸèƒ½ (4å‘¨)**
- Week 1-2: æ•°æ®åº“è®¾è®¡ã€åŸºç¡€æ¡†æ¶æ­å»º
- Week 3-4: å®¢æˆ·ç®¡ç†ã€æœåŠ¡å•†ç®¡ç†ã€æˆæƒç®¡ç†

**Phase 2: æ ¸å¿ƒåŠŸèƒ½ (4å‘¨)**
- Week 5-6: é¢„è­¦æ¥æ”¶ã€é¢„è­¦åˆ†é…ã€æ‰£è´¹é€»è¾‘
- Week 7-8: é‚®ä»¶é€šçŸ¥ã€é’±åŒ…ç®¡ç†ã€äº¤æ˜“æ˜ç»†

**Phase 3: é«˜çº§åŠŸèƒ½ (3å‘¨)**
- Week 9-10: æ•°æ®çœ‹æ¿ã€æŠ¥è¡¨ç»Ÿè®¡
- Week 11: è¡¥æ‰£è´¹ä»»åŠ¡ã€ä½™é¢ç›‘æ§

**Phase 4: æµ‹è¯•ä¸ä¸Šçº¿ (2å‘¨)**
- Week 12: é›†æˆæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•
- Week 13: ç°åº¦å‘å¸ƒã€æ­£å¼ä¸Šçº¿

### 10.2 é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | æ—¶é—´ | äº¤ä»˜ç‰© |
|--------|------|--------|
| éœ€æ±‚è¯„å®¡ | Week 0 | PRDæ–‡æ¡£ |
| è®¾è®¡è¯„å®¡ | Week 1 | UIè®¾è®¡ç¨¿ã€æ¥å£æ–‡æ¡£ |
| Alphaç‰ˆæœ¬ | Week 4 | åŸºç¡€åŠŸèƒ½å¯ç”¨ |
| Betaç‰ˆæœ¬ | Week 8 | æ ¸å¿ƒåŠŸèƒ½å®Œæ•´ |
| RCç‰ˆæœ¬ | Week 11 | åŠŸèƒ½å®Œæ•´ï¼Œå¾…æµ‹è¯• |
| æ­£å¼å‘å¸ƒ | Week 13 | ç”Ÿäº§ç¯å¢ƒä¸Šçº¿ |

### 10.3 é£é™©æ§åˆ¶

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|----------|
| æœåŠ¡å•†APIä¸ç¨³å®š | é«˜ | å®ç°é‡è¯•æœºåˆ¶ã€è®°å½•è¯¦ç»†æ—¥å¿— |
| é¢„è­¦æ•°æ®æ ¼å¼å·®å¼‚ | ä¸­ | ç»Ÿä¸€é€‚é…å±‚ã€å……åˆ†æµ‹è¯• |
| é«˜å¹¶å‘æ‰£è´¹å†²çª | é«˜ | åˆ†å¸ƒå¼é”ã€ä¹è§‚é” |
| å®¢æˆ·ä½™é¢ä¸è¶³æ¬ è´¹ | é«˜ | ä½™é¢é¢„è­¦ã€å…³åœæˆæƒæœºåˆ¶ |

---

## é™„å½•

### A. æœ¯è¯­è¡¨

| æœ¯è¯­ | è‹±æ–‡ | è¯´æ˜ |
|------|------|------|
| æ‹’ä»˜ | Chargeback | æ¶ˆè´¹è€…å‘é“¶è¡Œç”³è¯·é€€æ¬¾ |
| æ‹’ä»˜é¢„è­¦ | Chargeback Alert | æ‹’ä»˜å‘ç”Ÿå‰çš„é¢„è­¦ä¿¡æ¯ |
| Descriptor | Descriptor | ä¿¡ç”¨å¡è´¦å•ä¸Šçš„å•†å®¶åç§° |
| BIN | Bank Identification Number | é“¶è¡Œè¯†åˆ«ç ï¼Œå¡å·å‰6ä½ |
| CAID | Card Acceptor ID | å•†æˆ·è´¦æˆ·ID |
| ETHOCA | ETHOCA | éœ€è¦å•†å®¶ä¸»åŠ¨åé¦ˆçš„é¢„è­¦ç±»å‹ |
| RDR | Rapid Dispute Resolution | è‡ªåŠ¨é€€æ¬¾çš„é¢„è­¦ç±»å‹ |

### B. çŠ¶æ€æµè½¬å›¾

**æˆæƒçŠ¶æ€:**
```
åˆ›å»º â†’ Processing â†’ Active â‡„ Disabled
              â†“
           Failed
```

**é¢„è­¦å¤„ç†çŠ¶æ€(ETHOCA):**
```
Pending Feedback â†’ Completed
```

**æ‰£è´¹çŠ¶æ€:**
```
Uncharged â†’ Charged
```

---

## æ–‡æ¡£ç‰ˆæœ¬

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®è®¢äºº | ä¿®è®¢å†…å®¹ |
|------|------|--------|----------|
| v1.0 | 2025-11-06 | äº§å“éƒ¨ | åˆå§‹ç‰ˆæœ¬ |

---

## è”ç³»æ–¹å¼

å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»äº§å“éƒ¨ã€‚

---

**ğŸ“Œ æç¤º:**
- æœ¬æ–‡æ¡£å·²åŒ…å«å®Œæ•´çš„äº§å“éœ€æ±‚è§„æ ¼è¯´æ˜
- æ‰€æœ‰æµç¨‹å›¾ä½¿ç”¨Mermaidæ ¼å¼ï¼Œå¯åœ¨æ”¯æŒçš„Markdownç¼–è¾‘å™¨ä¸­æ¸²æŸ“
- è¯¦ç»†çš„ä¸šåŠ¡æµç¨‹è¯·å‚è€ƒã€Šä¸šåŠ¡æµç¨‹è®¾è®¡.mdã€‹
- å®Œæ•´çš„é¡µé¢å­—æ®µå®šä¹‰å’Œæ¥å£æ–‡æ¡£å·²æ•´åˆåœ¨æœ¬æ–‡ä¸­

**âœ… æ–‡æ¡£çŠ¶æ€:** å·²å®Œæˆï¼Œå¯ç”¨äºå¼€å‘

---

*æœ¬PRDæ–‡æ¡£ç”±AIè¾…åŠ©ç”Ÿæˆï¼ŒåŒ…å«äº†æ‹’ä»˜é¢„è­¦ç³»ç»Ÿçš„å®Œæ•´äº§å“è®¾è®¡ã€‚æ–‡æ¡£å†…å®¹è¯¦å°½ï¼Œè¦†ç›–äº†ä¸šåŠ¡æµç¨‹ã€åŠŸèƒ½è®¾è®¡ã€æ•°æ®ç»“æ„ã€æ¥å£è§„èŒƒç­‰æ‰€æœ‰å…³é”®ä¿¡æ¯ï¼Œå¯ç›´æ¥ç”¨äºç³»ç»Ÿå¼€å‘å®æ–½ã€‚*
