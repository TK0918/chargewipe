# 拒付预警系统 - 页面清单

## 📋 文档说明
本文档列出运营端和客户端两个系统计划实现的所有页面及其作用说明。

---

## 一、运营端（中文版）

### 1. 登录认证模块

#### 1.1 登录页面
**路径**: `/login`  
**作用**: 
- 运营人员登录系统
- 支持邮箱+密码登录
- 登录失败5次锁定15分钟
- JWT Token认证

---

### 2. 业务数据看板模块

#### 2.1 数据看板首页
**路径**: `/dashboard`  
**作用**: 
- 展示核心业务指标（总预警数、总成本、总收入、毛利润、毛利率）
- 显示环比上期对比数据
- 按时间维度展示每日趋势图（折线图）
- 按时间维度展示每月汇总表（表格）
- 按服务商维度展示统计表（预警数、成本、收入、毛利）
- 按客户维度展示统计表（预警数、消费、成本、毛利、当前余额）

---

### 3. 客户管理模块

#### 3.1 客户列表页
**路径**: `/customers`  
**作用**: 
- 展示所有客户列表
- 显示字段：客户ID、客户名称、联系邮箱、账号状态、当前余额、授权数量、创建时间
- 支持筛选：客户名称、邮箱、账号状态
- 支持搜索
- 操作：新增客户、查看详情、编辑、停用/启用

#### 3.2 客户详情页
**路径**: `/customers/:id`  
**作用**: 
- 查看客户完整信息
- 显示客户基本信息
- 显示客户当前余额和余额预警阈值
- 显示客户授权列表
- 显示客户预警统计
- 操作：编辑客户、设置价格、重置密码、调整余额、设置余额阈值

#### 3.3 新增客户页
**路径**: `/customers/new`  
**作用**: 
- 创建新客户账号
- 填写客户基本信息（客户名称、联系邮箱、密码等）
- 设置初始余额
- 设置余额预警阈值
- 设置客户定价（固定价格/阶梯价格）

#### 3.4 编辑客户页
**路径**: `/customers/:id/edit`  
**作用**: 
- 修改客户基本信息
- 修改账号状态（正常/已停用）
- 修改余额预警阈值

#### 3.5 客户定价设置页
**路径**: `/customers/:id/pricing`  
**作用**: 
- 设置客户定价模式（固定价格/阶梯价格）
- 固定价格模式：设置ETHOCA单价和RDR单价
- 阶梯价格模式：设置多个阶梯的价格
  - 阶梯1: 0-100条（ETHOCA价格、RDR价格）
  - 阶梯2: 101-500条（ETHOCA价格、RDR价格）
  - 阶梯3: 501+条（ETHOCA价格、RDR价格）

#### 3.6 客户余额管理页
**路径**: `/customers/:id/balance`  
**作用**: 
- 查看客户当前余额
- 手动调整余额（增加/减少）
- 查看余额变动记录
- 设置余额预警阈值

---

### 4. 服务商管理模块

#### 4.1 服务商列表页
**路径**: `/providers`  
**作用**: 
- 展示所有服务商列表
- 显示字段：服务商ID、服务商名称、支持模式、数据获取方式、轮询间隔、状态、创建时间
- 支持筛选：服务商名称、支持模式、数据获取方式、状态
- 支持搜索
- 操作：新增服务商、查看详情、编辑、启用/停用

#### 4.2 服务商详情页
**路径**: `/providers/:id`  
**作用**: 
- 查看服务商完整信息
- 显示服务商基本信息
- 显示服务商成本价格设置
- 显示服务商API配置
- 显示服务商预警统计
- 操作：编辑服务商、配置API、设置成本价格、测试连接

#### 4.3 新增服务商页
**路径**: `/providers/new`  
**作用**: 
- 创建新服务商
- 填写服务商基本信息（服务商名称、联系方式等）
- 选择支持模式（ETHOCA/RDR/两者）
- 选择数据获取方式（推送/轮询）
- 设置轮询间隔（默认60分钟）

#### 4.4 编辑服务商页
**路径**: `/providers/:id/edit`  
**作用**: 
- 修改服务商基本信息
- 修改支持模式
- 修改数据获取方式
- 修改轮询间隔
- 修改状态（启用/停用）

#### 4.5 服务商API配置页
**路径**: `/providers/:id/api-config`  
**作用**: 
- 配置服务商API接口
- **推送模式**：
  - 显示系统提供的Webhook URL
  - 显示系统提供的验证Token
  - 指导服务商配置推送地址
- **轮询模式**：
  - 填写服务商API Endpoint
  - 填写API Key
  - 填写API Secret（可选）
- **通用接口**：
  - 填写授权接口URL
  - 填写反馈接口URL（仅ETHOCA模式）
- 操作：测试连接、保存配置

#### 4.6 服务商成本价格设置页
**路径**: `/providers/:id/pricing`  
**作用**: 
- 设置服务商成本价格
- 选择定价模式（固定价格/阶梯价格）
- 固定价格模式：设置ETHOCA成本价和RDR成本价
- 阶梯价格模式：设置多个阶梯的成本价格
  - 阶梯1: 0-100条（ETHOCA成本、RDR成本）
  - 阶梯2: 101-500条（ETHOCA成本、RDR成本）
  - 阶梯3: 501+条（ETHOCA成本、RDR成本）

---

### 5. 预警明细模块

#### 5.1 预警列表页
**路径**: `/alerts`  
**作用**: 
- 展示所有预警列表
- 显示字段：预警ID、预警类型、Descriptor、客户名称、服务商、交易金额、处理状态、扣费状态、接收时间
- 支持筛选：预警类型、客户名称、服务商、处理状态、扣费状态、接收时间范围
- 支持搜索（预警ID、Descriptor）
- 操作：查看详情、分配客户、标记已扣费、批量导出Excel

#### 5.2 预警详情页
**路径**: `/alerts/:id`  
**作用**: 
- 查看预警完整信息
- 显示预警基本信息（预警ID、预警类型、Descriptor、交易金额、交易时间等）
- 显示预警处理状态
- 显示扣费信息（扣费状态、扣费金额、客户价格、服务商成本、毛利）
- 显示客户信息
- 显示服务商信息
- 操作：分配客户、标记已扣费、查看关联授权

#### 5.3 预警分配页
**路径**: `/alerts/:id/assign`  
**作用**: 
- 手动分配未匹配的预警给客户
- 选择目标客户
- 确认分配
- 分配后自动执行扣费逻辑

---

## 二、客户端（英文版）

### 1. 登录认证模块

#### 1.1 登录页面
**路径**: `/login`  
**作用**: 
- 客户登录系统
- 支持邮箱+密码登录
- 登录失败5次锁定15分钟
- JWT Token认证
- 提供"忘记密码"链接

#### 1.2 忘记密码页面
**路径**: `/forgot-password`  
**作用**: 
- 客户忘记密码时重置密码
- 输入邮箱地址
- 发送重置密码邮件
- 通过邮件链接重置密码

#### 1.3 重置密码页面
**路径**: `/reset-password`  
**作用**: 
- 通过邮件链接进入
- 输入新密码
- 确认新密码
- 提交重置

---

### 2. 授权管理模块

#### 2.1 授权列表页
**路径**: `/authorizations`  
**作用**: 
- 展示客户的所有授权列表
- 显示字段：Descriptor、授权模式（ETHOCA/RDR）、服务商、通知邮箱、授权状态、创建时间
- 支持筛选：授权模式、服务商、授权状态
- 支持搜索（Descriptor）
- 状态颜色标识：
  - Processing（黄色）：等待服务商审核
  - Active（绿色）：已生效，可接收预警
  - Failed（红色）：审核失败
  - Disabled（灰色）：已停用
- 操作：新增授权、查看详情、编辑邮箱、停用/恢复、删除

#### 2.2 新增授权页
**路径**: `/authorizations/new`  
**作用**: 
- 创建新授权
- 填写Descriptor（必填）
- 选择授权模式（ETHOCA/RDR，可同时选择）
- 如果选择RDR：填写BIN（6位数字，必填）、CAID（必填）
- 填写通知邮箱（必填）
- 选择服务商（必填）
- 提交后调用服务商API，状态变为Processing

#### 2.3 授权详情页
**路径**: `/authorizations/:id`  
**作用**: 
- 查看授权完整信息
- 显示授权基本信息
- 显示授权状态及状态说明
- 显示服务商信息
- 显示授权历史记录
- 操作：编辑邮箱、停用/恢复、删除

#### 2.4 编辑授权邮箱页
**路径**: `/authorizations/:id/edit-email`  
**作用**: 
- 修改授权通知邮箱
- 仅Active状态的授权可编辑
- 修改后立即生效

---

### 3. 预警管理模块

#### 3.1 预警列表页
**路径**: `/alerts`  
**作用**: 
- 展示客户的所有预警列表
- 显示字段：Alert ID、Alert Type、Descriptor、Transaction Amount、Transaction Time、Card Last 4、Status、Received Time
- 支持筛选：预警类型、Descriptor、处理状态、接收时间范围
- 支持搜索（Alert ID）
- 状态标识：
  - Pending Feedback：等待反馈（ETHOCA）
  - Completed：已反馈（ETHOCA）
  - No Action Needed：无需操作（RDR）
- 操作：查看详情、提交反馈（仅ETHOCA且状态为Pending Feedback）

#### 3.2 预警详情页
**路径**: `/alerts/:id`  
**作用**: 
- 查看预警完整信息
- 显示预警基本信息（Alert ID、Alert Type、Descriptor、交易金额、交易时间、卡号后4位等）
- 显示预警处理状态
- 显示扣费信息（扣费状态、扣费金额）
- 显示接收时间
- 操作：提交反馈（仅ETHOCA且状态为Pending Feedback）

#### 3.3 ETHOCA反馈页
**路径**: `/alerts/:id/feedback`  
**作用**: 
- 提交ETHOCA预警的退款反馈信息
- 填写退款单号（必填，不能为空）
- 填写退款金额（必填，必须>0，最多2位小数）
- 选择退款时间（必填，不能是未来时间）
- 提交后调用服务商API反馈
- 反馈后状态变为Completed，不可修改

---

### 4. 钱包管理模块

#### 4.1 钱包首页
**路径**: `/wallet`  
**作用**: 
- 显示当前钱包余额
- 显示余额预警状态
- 提供Tab页签切换：
  - Transaction Details（交易明细）
  - Online Recharge（在线充值）
  - Offline Transfer（线下转账）

#### 4.2 交易明细页
**路径**: `/wallet/transactions`  
**作用**: 
- 展示所有交易明细列表
- 显示字段：Transaction Time、Transaction Type、Amount、Balance、Related Alert ID、Remark
- 交易类型：
  - Online Recharge：在线充值（正数）
  - Offline Transfer：线下转账（正数）
  - Alert Consumption：预警消费（负数）
- 支持筛选：交易类型、时间范围
- 支持搜索
- 显示交易后余额
- 可点击Related Alert ID跳转到预警详情

#### 4.3 在线充值页
**路径**: `/wallet/recharge`  
**作用**: 
- 客户在线充值到钱包
- 输入充值金额（最低$10）
- 选择支付方式（信用卡/PayPal/Stripe等）
- 跳转到支付网关完成支付
- 支付成功后自动到账
- 到账后自动补扣未扣费的预警

#### 4.4 线下转账页
**路径**: `/wallet/transfer`  
**作用**: 
- 客户提交线下转账申请
- 填写转账金额
- 选择转账日期
- 上传转账凭证（jpg/png/pdf，最大5MB）
- 填写备注（可选）
- 提交后状态为Pending Review
- 财务人员在1-2个工作日内审核
- 审核通过后到账并自动补扣未扣费的预警
- 审核拒绝会通知客户并说明原因

#### 4.5 转账审核状态页
**路径**: `/wallet/transfers`  
**作用**: 
- 查看所有线下转账记录
- 显示转账状态：
  - Pending Review：待审核
  - Approved：已通过
  - Rejected：已拒绝
- 显示审核时间、审核结果、拒绝原因（如有）
- 可查看转账凭证

---

## 三、页面统计

### 运营端页面总数：13个
1. 登录页面
2. 数据看板首页
3. 客户列表页
4. 客户详情页
5. 新增客户页
6. 编辑客户页
7. 客户定价设置页
8. 客户余额管理页
9. 服务商列表页
10. 服务商详情页
11. 新增服务商页
12. 编辑服务商页
13. 服务商API配置页
14. 服务商成本价格设置页
15. 预警列表页
16. 预警详情页
17. 预警分配页

**实际统计：17个页面**

### 客户端页面总数：15个
1. 登录页面
2. 忘记密码页面
3. 重置密码页面
4. 授权列表页
5. 新增授权页
6. 授权详情页
7. 编辑授权邮箱页
8. 预警列表页
9. 预警详情页
10. ETHOCA反馈页
11. 钱包首页
12. 交易明细页
13. 在线充值页
14. 线下转账页
15. 转账审核状态页

**实际统计：15个页面**

---

## 四、页面功能分类

### 运营端功能分类：
- **登录认证**：1个页面
- **数据看板**：1个页面
- **客户管理**：6个页面
- **服务商管理**：6个页面
- **预警管理**：3个页面

### 客户端功能分类：
- **登录认证**：3个页面
- **授权管理**：4个页面
- **预警管理**：3个页面
- **钱包管理**：5个页面

---

## 五、关键页面说明

### 运营端关键页面：
1. **数据看板首页**：核心业务数据可视化，支持多维度统计
2. **客户定价设置页**：支持固定价格和阶梯价格两种模式
3. **服务商API配置页**：支持推送和轮询两种数据获取方式
4. **预警分配页**：处理未匹配预警的手动分配

### 客户端关键页面：
1. **新增授权页**：客户创建授权的核心页面，支持ETHOCA和RDR两种模式
2. **ETHOCA反馈页**：客户处理ETHOCA预警的关键页面
3. **在线充值页**：支持多种支付方式的在线充值
4. **线下转账页**：支持上传凭证的线下转账申请

---

**文档生成时间**：2025-01-XX  
**文档版本**：v1.0  
**文档状态**：✅ 已完成



