# 拒付预警系统 PRD (Product Requirements Document)

## 文档信息

| 项目 | 内容 |
|------|------|
| 文档版本 | v1.0 |
| 创建日期 | 2025-11-06 |
| 产品名称 | 拒付预警系统 |
| 产品类型 | B端SaaS平台 |
| 文档作者 | 产品部 |

---

## 📋 目录

1. [项目概述](#1-项目概述)
2. [业务背景](#2-业务背景)
3. [产品目标](#3-产品目标)
4. [用户角色](#4-用户角色)
5. [系统架构](#5-系统架构)
6. [核心业务流程](#6-核心业务流程)
7. [功能需求详细说明](#7-功能需求详细说明)
8. [数据字典](#8-数据字典)
9. [接口设计](#9-接口设计)
10. [非功能性需求](#10-非功能性需求)
11. [风险与应对](#11-风险与应对)
12. [附录](#附录)

---

## 1. 项目概述

### 1.1 项目背景
公司将与多个拒付预警服务商合作,通过API对接获取拒付预警数据,并为客户提供拒付预警服务,从中赚取差价。

### 1.2 产品定位
构建一个双端系统平台:
- **运营端(中文)**: 内部运营人员使用,管理服务商、客户、财务数据
- **客户端(英文)**: 外部客户使用,管理授权店铺、查看预警、处理预警、管理钱包

### 1.3 商业模式
- 向服务商支付成本价
- 向客户收取售价
- 赚取差价作为利润
- 采用预付费模式,客户需先充值到钱包

---

## 2. 业务背景

### 2.1 拒付预警类型

| 类型 | 说明 | 处理方式 |
|------|------|----------|
| ETHOCA | 需要商家主动反馈退款信息 | 客户需在系统中提交退款单号、金额、时间 |
| RDR | 自动退款,无需商家操作 | 系统仅通知客户,无需客户操作 |

### 2.2 授权信息说明

| 授权模式 | 必填信息 | 说明 |
|----------|----------|------|
| ETHOCA | Descriptor | 商家标识符 |
| RDR | Descriptor + BIN + CAID | 商家标识符 + 银行识别码 + 商户账户ID |

**注意**: 同一个Descriptor可以同时授权ETHOCA和RDR两种模式。

### 2.3 计费规则
- ✅ 按预警条数计费
- ✅ 支持按客户设置不同价格
- ✅ 支持ETHOCA和RDR设置不同价格
- ✅ 支持固定成本和阶梯成本
- ✅ 预警分配给客户时立即扣费
- ✅ 余额不足时记录未扣费,充值后自动补扣

---

## 3. 产品目标

### 3.1 业务目标
- ✅ 实现多服务商统一管理和对接
- ✅ 为客户提供便捷的拒付预警服务
- ✅ 建立透明的财务管理体系
- ✅ 实现业务数据可视化

### 3.2 用户目标
- **运营人员**: 高效管理服务商和客户,实时掌握业务数据
- **客户**: 便捷管理店铺授权,及时处理拒付预警,清晰的账务明细

---

## 4. 用户角色

| 角色 | 使用系统 | 主要职责 |
|------|----------|----------|
| 运营人员 | 运营端 | 管理服务商、管理客户、查看数据报表、处理异常 |
| 财务人员 | 运营端 | 审核线下转账、查看财务报表 |
| 客户 | 客户端 | 授权店铺、查看预警、处理ETHOCA预警、管理钱包 |

---

完整PRD文档因篇幅过长,已拆分为以下文件:

1. ✅ **PRD主文档.md** (当前文件) - 概述、背景、目标
2. 📄 **业务流程设计.md** - 详细业务流程图和说明
3. 📄 **运营端功能设计.md** - 运营端所有功能的详细设计
4. 📄 **客户端功能设计.md** - 客户端所有功能的详细设计
5. 📄 **数据库设计.md** - 完整数据表结构定义
6. 📄 **接口文档.md** - API接口详细说明
7. 📄 **非功能需求与风险.md** - 性能、安全、风险应对

请查看其他文档获取完整设计细节。

---

## 核心要点速览

### 系统架构
```
服务商API ⟷ 拒付预警系统 ⟷ 运营端 + 客户端
         ↓
    邮件通知 + 飞书通知
```

### 关键业务流程
1. **服务商对接** → 配置API → 测试连接 → 启用
2. **客户授权** → 提交信息 → 服务商审核(3-4天) → 生效
3. **预警接收** → 匹配授权 → 分配客户 → 扣费 → 邮件通知
4. **ETHOCA处理** → 客户提交退款信息 → 发送给服务商
5. **钱包充值** → 在线支付/线下转账 → 余额更新 → 补扣未扣费预警

### 核心数据表
- customers (客户表)
- providers (服务商表)
- authorizations (授权表)
- alerts (预警表)
- transactions (交易明细表)
- customer_pricing (客户定价表)
- provider_pricing (服务商定价表)

### 关键状态
- **授权状态**: Processing → Active / Failed → Disabled
- **预警状态**: Pending → Completed (仅ETHOCA) / None (RDR)
- **扣费状态**: Charged / Uncharged
- **转账状态**: Pending Review → Approved / Rejected

---

## 下一步行动

1. ✅ 产品团队: 审核并确认PRD
2. 🔄 技术团队: 评估技术可行性和开发周期
3. 🔄 设计团队: 根据PRD设计UI/UX原型
4. 🔄 测试团队: 准备测试用例和测试计划
5. 🔄 运营团队: 准备运营文档和培训材料

---

**文档状态**: ✅ 已完成初稿,待评审

**联系方式**: 如有疑问,请联系产品部

---

*本PRD文档详细描述了拒付预警系统的完整产品设计,包含业务流程、功能设计、数据结构、接口规范等所有必要信息,可直接用于系统开发。*
